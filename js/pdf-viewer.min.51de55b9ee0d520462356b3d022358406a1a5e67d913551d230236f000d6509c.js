(()=>{const n=Array.from(document.querySelectorAll(".pdf-container[data-pdf-source]"));if(!n.length)return;const s="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/",r=`${s}pdf.min.js`,e=`${s}pdf.worker.min.js`,t=e=>{window.pdfjsLib&&window.pdfjsLib.GlobalWorkerOptions&&e&&(window.pdfjsLib.GlobalWorkerOptions.workerSrc=e)},c=(e,t)=>new Promise((n,s)=>{const o=document.createElement("script");o.src=e,o.async=!0,t&&Object.entries(t).forEach(([e,t])=>{o.setAttribute(e,t)}),o.onload=()=>n(),o.onerror=()=>s(new Error(`Unable to load script: ${e}`)),document.head.appendChild(o)}),o=(e,n)=>!e||typeof e.then!="function"?Promise.reject(new Error("PDF.js failed to initialise")):e.then(e=>{const s=e||window.pdfjsLib;if(!s)throw new Error("PDF.js failed to initialise");return t(n),s}),i=()=>{const t=new Promise((e,t)=>{const n=document.createElement("script");n.src=r,n.async=!0,n.crossOrigin="anonymous",n.onload=()=>e(window.pdfjsLib||null),n.onerror=()=>t(new Error("Unable to load PDF.js from CDN")),document.head.appendChild(n)});return window.__pdfjsCdnPromise=t,window.__pdfjsCdnWorkerUrl||(window.__pdfjsCdnWorkerUrl=e),t},a=()=>{const e=window.__pdfjsCdnPromise;return!e||typeof e.then!="function"?i():e.catch(()=>i())},l=(n,s)=>{if(window.pdfjsLib&&window.pdfjsLib.GlobalWorkerOptions)return t(s),Promise.resolve(window.pdfjsLib);if(window.__pdfjsLoadingPromise)return s&&(window.__pdfjsWorkerUrl=s),window.__pdfjsLoadingPromise;s&&(window.__pdfjsWorkerUrl=s);const r=()=>c(n).then(()=>window.pdfjsLib&&window.pdfjsLib.GlobalWorkerOptions?(t(s),window.pdfjsLib):o(a(),window.__pdfjsCdnWorkerUrl||e)),i=()=>o(a(),window.__pdfjsCdnWorkerUrl||e);return n?(window.__pdfjsLoadingPromise=r().catch(()=>i()),window.__pdfjsLoadingPromise):(window.__pdfjsLoadingPromise=i(),window.__pdfjsLoadingPromise)},d=e=>{if(!e||e.dataset.pdfInitialized)return;e.dataset.pdfInitialized="true";const g=e.dataset.pdfSource,C=e.dataset.pdfScript||"",x=e.dataset.pdfWorker||"",s=e.querySelector("[data-pdf-canvas]"),o=e.querySelector("[data-pdf-loading]"),_=e.querySelector("[data-pdf-current]"),j=e.querySelector("[data-pdf-total]"),r=e.querySelector("[data-pdf-total-wrapper]"),c=e.querySelector('[data-pdf-control="prev"]'),d=e.querySelector('[data-pdf-control="next"]'),a=e.querySelector("[data-pdf-viewer]");let h=null,n=1,y=null,t=null,b=!1,p=null;const i=(e,t)=>{if(!o)return;o.style.display="block";const n=o.querySelector(".pdf-loading-text");n?n.textContent=e||"loading…":o.textContent=e||"loading…",t?o.classList.add("is-error"):o.classList.remove("is-error")},w=()=>{o&&(o.style.display="none")},O=()=>{c&&(c.disabled=n<=1),d&&(d.disabled=!!t&&n>=t)},f=()=>{_&&(_.textContent=n),O()},u=e=>{if(!s||!g)return;let o=typeof e=="number"?e:n;if(o<1&&(o=1),t&&o>t&&(o=t),!h){n=o,f();return}if(b){p={page:o};return}b=!0,i(`rendering page ${o}…`);const r=s.getContext("2d");h.getPage(o).then(e=>{const c=e.getViewport({scale:1});let o=a?a.clientWidth:s.parentElement.clientWidth;o||(o=c.width);let n=o/c.width;(!n||!Number.isFinite(n))&&(n=1);const i=e.getViewport({scale:n}),t=window.devicePixelRatio||1,d=Math.max(Math.floor(i.width),1),l=Math.max(Math.floor(i.height),1);s.style.width="100%",s.style.height=`${l}px`,s.width=Math.floor(d*t),s.height=Math.floor(l*t),r.setTransform(1,0,0,1,0,0),r.fillStyle="#ffffff",r.fillRect(0,0,s.width,s.height);const u={canvasContext:r,viewport:i,transform:t!==1?[t,0,0,t,0,0]:null};return e.render(u).promise}).then(()=>{y=o,n=o,f()}).catch(()=>{i("unable to render this page",!0)}).finally(()=>{if(b=!1,y!==null&&w(),p){const e=p.page;p=null,u(e)}})},m=e=>{let s=n+e;if(s<1&&(s=1),t&&s>t&&(s=t),s===n)return;n=s,f(),u(s)};c&&c.addEventListener("click",()=>{m(-1)}),d&&d.addEventListener("click",()=>{m(1)}),e.addEventListener("keydown",e=>{e.key==="ArrowLeft"?(e.preventDefault(),m(-1)):e.key==="ArrowRight"&&(e.preventDefault(),m(1))});const v=()=>{if(!h)return;u(n)},E=()=>{if(!g){i("no pdf url provided",!0);return}i("loading…"),l(C,x).then(e=>e.getDocument({url:g,withCredentials:!1}).promise).then(e=>{h=e,t=e.numPages||null,t&&j?(j.textContent=t,r&&(r.style.display="inline")):r&&(r.style.display="none"),f(),u(n)}).catch(()=>{i("unable to load pdf document",!0)})};if(typeof ResizeObserver!="undefined"&&a){const e=new ResizeObserver(()=>{v()});e.observe(a)}else window.addEventListener("resize",v),window.addEventListener("orientationchange",v);E()};n.forEach(e=>{d(e)})})()