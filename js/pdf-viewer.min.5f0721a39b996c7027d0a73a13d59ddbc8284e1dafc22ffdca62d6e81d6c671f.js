(()=>{const t=Array.from(document.querySelectorAll(".pdf-container[data-pdf-source]"));if(!t.length)return;const e=(e,{sameOrigin:t=!1}={})=>{if(!e||typeof e!="string")return"";try{const n=new URL(e,window.location.origin);return["http:","https:"].includes(n.protocol)?t&&n.origin!==window.location.origin?"":n.href:""}catch{return""}},n=e=>{window.pdfjsLib&&window.pdfjsLib.GlobalWorkerOptions&&e&&(window.pdfjsLib.GlobalWorkerOptions.workerSrc=e)},s=(t,n)=>new Promise((s,o)=>{const a=e(t,{sameOrigin:!0});if(!a){o(new Error("Blocked PDF.js script URL"));return}const i=document.createElement("script");i.src=a,i.async=!0,n&&Object.entries(n).forEach(([e,t])=>{i.setAttribute(e,t)}),i.onload=()=>s(),i.onerror=()=>o(new Error(`Unable to load script: ${a}`)),document.head.appendChild(i)}),o=(t,o)=>{const a=e(t,{sameOrigin:!0}),i=e(o,{sameOrigin:!0});return window.pdfjsLib&&window.pdfjsLib.GlobalWorkerOptions?(n(i),Promise.resolve(window.pdfjsLib)):!a||!i?Promise.reject(new Error("PDF.js assets blocked by URL policy")):window.__pdfjsLoadingPromise?(i&&(window.__pdfjsWorkerUrl=i),window.__pdfjsLoadingPromise):(window.__pdfjsWorkerUrl=i,window.__pdfjsLoadingPromise=s(a).then(()=>{if(window.pdfjsLib&&window.pdfjsLib.GlobalWorkerOptions)return n(i),window.pdfjsLib;throw new Error("PDF.js failed to initialise")}),window.__pdfjsLoadingPromise)},i=t=>{if(!t||t.dataset.pdfInitialized)return;t.dataset.pdfInitialized="true";const v=e(t.dataset.pdfSource),x=e(t.dataset.pdfScript||"",{sameOrigin:!0}),O=e(t.dataset.pdfWorker||"",{sameOrigin:!0}),i=t.querySelector("[data-pdf-canvas]"),a=t.querySelector("[data-pdf-loading]"),w=t.querySelector("[data-pdf-current]"),y=t.querySelector("[data-pdf-total]"),l=t.querySelector("[data-pdf-total-wrapper]"),d=t.querySelector('[data-pdf-control="prev"]'),u=t.querySelector('[data-pdf-control="next"]'),c=t.querySelector("[data-pdf-viewer]");let m=null,s=1,_=null,n=null,j=!1,g=null;const r=(e,t)=>{if(!a)return;a.style.display="block";const n=a.querySelector(".pdf-loading-text");n?n.textContent=e||"loading…":a.textContent=e||"loading…",t?a.classList.add("is-error"):a.classList.remove("is-error")},C=()=>{a&&(a.style.display="none")},E=()=>{d&&(d.disabled=s<=1),u&&(u.disabled=!!n&&s>=n)},p=()=>{w&&(w.textContent=s),E()},h=e=>{if(!i||!v)return;let t=typeof e=="number"?e:s;if(t<1&&(t=1),n&&t>n&&(t=n),!m){s=t,p();return}if(j){g={page:t};return}j=!0,r(`rendering page ${t}…`);const o=i.getContext("2d");m.getPage(t).then(e=>{const r=e.getViewport({scale:1});let s=c?c.clientWidth:i.parentElement.clientWidth;s||(s=r.width);let n=s/r.width;(!n||!Number.isFinite(n))&&(n=1);const a=e.getViewport({scale:n}),t=window.devicePixelRatio||1,d=Math.max(Math.floor(a.width),1),l=Math.max(Math.floor(a.height),1);i.style.width="100%",i.style.height=`${l}px`,i.width=Math.floor(d*t),i.height=Math.floor(l*t),o.setTransform(1,0,0,1,0,0),o.fillStyle="#ffffff",o.fillRect(0,0,i.width,i.height);const u={canvasContext:o,viewport:a,transform:t!==1?[t,0,0,t,0,0]:null};return e.render(u).promise}).then(()=>{_=t,s=t,p()}).catch(()=>{r("unable to render this page",!0)}).finally(()=>{if(j=!1,_!==null&&C(),g){const e=g.page;g=null,h(e)}})},f=e=>{let t=s+e;if(t<1&&(t=1),n&&t>n&&(t=n),t===s)return;s=t,p(),h(t)};d&&d.addEventListener("click",()=>{f(-1)}),u&&u.addEventListener("click",()=>{f(1)}),t.addEventListener("keydown",e=>{e.key==="ArrowLeft"?(e.preventDefault(),f(-1)):e.key==="ArrowRight"&&(e.preventDefault(),f(1))});const b=()=>{if(!m)return;h(s)},k=()=>{if(!v){r("no pdf url provided",!0);return}if(!x||!O){r("pdf assets unavailable",!0);return}r("loading…"),o(x,O).then(e=>e.getDocument({url:v,withCredentials:!1}).promise).then(e=>{m=e,n=e.numPages||null,n&&y?(y.textContent=n,l&&(l.style.display="inline")):l&&(l.style.display="none"),p(),h(s)}).catch(e=>{const t=e&&e.message?e.message:"unable to load pdf document";r(t,!0)})};if(typeof ResizeObserver!="undefined"&&c){const e=new ResizeObserver(()=>{b()});e.observe(c)}else window.addEventListener("resize",b),window.addEventListener("orientationchange",b);k()};t.forEach(e=>{i(e)})})()